---
icon: file 
order: 400
---

# Публикация на сервере - IIS

## Установка IIS в Windows 10.

Для установки веб-сервера в Windows 10 необходимо в «Программы и компоненты» - «Включение или отключение компонентов Windows» установить флажок для «Службы IIS»:

![Включение компоненты ](static/01_IIS.png)

Далее необходимо раскрыть эту ветку и установить флажок напротив «ASP.NET 4.6» (Либо другую версию):

![Включение компоненты](static/02_IIS.png)

Нажимаем «ОК», ждем окончания установки и перезагружаем компьютер. Для проверки вводим в адресную строку браузера "http://localhost/" и видим страницу приветствия:

![Страница Localhost](static/03_IIS.png)

Теперь необходимо дать полный доступ для пользователя «IUSR» и группы пользователей «IIS_IUSRS» к папке с ИБ (для файловой базы):

![Разрешения](static/04_IIS.png)

А также к папке с установленной платформой:

![Разрешения](static/05_IIS.png)

Для публикации необходимо открыть ИБ в режиме «Конфигуратор», запущенный от имени администратора:

![Запуск 1с](static/06_IIS.png)
![Запуск 1с](static/07_IIS.png)

В меню «Администрирование» необходимо выбрать «Публикация на веб-сервере…»:

![Публикация на web сервере](static/08_IIS.png)

Откроется окно публикации ИБ:

![Окно публикации](static/09_IIS.png)

На закладке «HTTP сервисы» необходимо проверить, что для публикации выбраны все сервисы:

![Окно публикации](static/10_IIS.png)

Нажимаем кнопку «Опубликовать» и если не было ошибок, то система сообщит об успешной публикации ИБ:

![Публикация веб клиента](static/11_IIS.png)

На вопрос о перезапуске WEB – сервера отвечаем «Да».  
После публикации ИБ, по адресу «c:\inetpub\wwwroot\» будет создана папка с именем опубликованной ИБ. На неё также необходимо дать полный доступ для пользователя «IUSR» и группы пользователей «IIS_IUSRS»:

![Разрешения ](static/12_IIS.png)

Далее необходимо открыть «Диспетчер служб IIS», для чего можно воспользоваться «поиском в Windows»:

![Диспетчер служб IIS ](static/13_IIS.png)

Если версия ОС Windows имеет разрядность х64, а платформа 1С используется разрядности x32, тогда идем в «Пул приложений» - дополнительные параметры для «DefaultAppPool»:

![Диспетчер служб IIS](static/14_IIS.png)

И для параметра «Разрешены 32-разрядные приложения» устанавливаем значение «True»:

![Диспетчер служб IIS](static/15_IIS.png)

Если разрядность ОС и платформы 1С совпадают и являются х64, то параметр «Разрешены 32-разрядные приложения» изменять не нужно.

Раскроем ветку «Сайты» - «Default Web Site», найдем наше опубликованное приложение (имя должно совпадать с именем опубликованной ИБ) и откроем «Сопоставление обработчиков»:

![Сопоставление обработчиков](static/16_IIS.png)

Необходимо убедиться, что обработчик «1С Web-service Extension» существует, в противном случае его необходимо создать:

![1С-web service](static/17_IIS.png)

Свойства обработчика:

![Свойства обработчика](static/18_IIS.png)

Разрешения функции:

![Диспетчер служб IIS](static/19_IIS.png)

После внесенных изменений необходимо перезапустить веб сервер:

![Диспетчер служб IIS](static/20_IIS.png)

Для подключения к ИБ в адресной строке браузера необходимо набрать следующее: http://localhost/&lt;ИмяИБ&gt; либо http://ip веб сервера/ИмяИБ, где ИмяИБ – имя, указанное при публикации ИБ:

![Web клиент](static/21_IIS.png)


## Возможные ошибки

### Ошибка HTTP 500.0 Internal Server Error  
Возможна проблема с дополнительным параметром "Разрешены 32-разрядные приложения". Если платформа 1С 64-битная, то эта настройка должна быть установлена в False.

### Ошибка веб-сервера
При подключении к базе не отображаются картинки и выдается ошибка:

![Ошибка непредвиденная](static/22_IIS.png)

Для решения данной ошибки, перейдите в службы IIS -> Пулы приложений -> ПКМ по DefaultAppPool -> Дополнительные параметры, и установите параметр "Режим управляемого конвейера" на "Classic"

![Удалить Classic](static/23_IIS.png)



